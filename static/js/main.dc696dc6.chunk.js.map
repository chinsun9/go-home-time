{"version":3,"sources":["hooks/useMyActions.tsx","modules/time/reducer.ts","components/Timer.tsx","utils/durationToHMS.tsx","components/Header.tsx","components/Share.tsx","modules/index.ts","reportWebVitals.ts","utils/secondToDuration.tsx","components/Home.tsx","components/Footer.tsx","components/About.tsx","components/Start.tsx","App.tsx","index.tsx","hooks/useMyState.tsx","modules/time/actions.ts","modules/time/index.ts"],"names":["useTimeActions","dispatch","useDispatch","initTime","useCallback","time","setTime","initMsg","msg","setMsg","timeReducer","createReducer","flag","SET_TIME","state","payload","numberTime","Number","isInvalidTime","isNaN","length","padStart","padEnd","SET_MSG","Timer","initialDuration","duration","isOver","useState","abs","setDuration","isTimeOver","setIsTimeOver","location","useHistory","useTime","advanceNotice","useRef","padNumber","value","toString","useEffect","console","log","Buffer","from","search","substr","countdown","seconds","asSeconds","window","Notification","current","setTimeout","prev","clone","subtract","run","clearTimeout","durationToHMS","hour","min","sec","className","defaultProps","get","Header","to","baseURL","CSSPlugin","Share","history","shareLink","setShareLink","isEditAbleMsg","setIsEditAbleMsg","isEditAbleTime","setIsEditAbleTime","isAnimate","setIsAnimate","inputRef","modalRef","shareUrl","replace","trim","ref","type","onClick","e","preventDefault","navigator","clipboard","writeText","tl","TimelineLite","clear","fromTo","opacity","ease","Power3","easeOut","delay","onComplete","spellCheck","readOnly","htmlFor","name","id","checked","onChange","inputValue","target","rootReducer","combineReducers","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","secondToDuration","moment","Home","match","useRouteMatch","input","params","timerState","setTimerState","getHMS","endTime","now","diffSec","diff","info","add","sto","Footer","href","rel","About","Start","numberInput","quittingTime","format","App","permission","requestPermission","silent","basename","process","exact","path","store","createStore","ReactDOM","render","StrictMode","document","getElementById","useSelector","createAction"],"mappings":"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","file":"static/js/main.dc696dc6.chunk.js","sourcesContent":["import { useDispatch } from 'react-redux';\r\nimport { useCallback } from 'react';\r\nimport { setMsg, setTime } from '../modules/time';\r\n\r\nconst useTimeActions = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const initTime = useCallback(\r\n    (time: string) => {\r\n      dispatch(setTime(time));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const initMsg = useCallback(\r\n    (msg: string) => {\r\n      dispatch(setMsg(msg));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return { initTime, initMsg };\r\n};\r\n\r\nexport default useTimeActions;\r\n","import { createReducer } from 'typesafe-actions';\r\nimport { SET_MSG, SET_TIME } from './actions';\r\nimport { TimeAction } from './types';\r\n\r\n// 초깃값 설정\r\nconst initialState: TimeState = {\r\n  time: '1800',\r\n  flag: false,\r\n  msg: `퇴근합시다!`,\r\n};\r\n\r\nconst timeReducer = createReducer<TimeState, TimeAction>(initialState, {\r\n  [SET_TIME]: (state, { payload: time }) => {\r\n    const numberTime = Number(time);\r\n\r\n    const isInvalidTime =\r\n      Number.isNaN(numberTime) ||\r\n      time.length > 4 ||\r\n      numberTime > 2400 ||\r\n      numberTime < 0;\r\n\r\n    return {\r\n      ...state,\r\n      flag: true,\r\n      time: isInvalidTime\r\n        ? 'invalid'\r\n        : `${time.padStart(2, '0').padEnd(4, '0')}`,\r\n    };\r\n  },\r\n  [SET_MSG]: (state, { payload: msg }) => {\r\n    if (!msg) return state;\r\n\r\n    return { ...state, msg };\r\n  },\r\n});\r\n\r\nexport default timeReducer;\r\n","/* eslint-disable no-new */\r\nimport './Timer.css';\r\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Duration } from 'moment';\r\nimport useTimeActions from '../hooks/useMyActions';\r\nimport useTime from '../hooks/useMyState';\r\nimport { TimerState } from '../types';\r\nimport { durationToHMS } from '../utils/durationToHMS';\r\n\r\ntype Props = TimerState;\r\n\r\nconst ONE_SECOND = 1000;\r\n\r\n/**\r\n * 남은 시간을 넘겨주면 표시해 주는 컴포넌트\r\n */\r\nfunction Timer({ duration: initialDuration, isOver }: Props) {\r\n  const [duration, setDuration] = useState<Duration>(\r\n    isOver ? initialDuration.abs() : initialDuration\r\n  );\r\n  const [isTimeOver, setIsTimeOver] = useState(isOver);\r\n  const { location } = useHistory();\r\n  const { msg } = useTime();\r\n  const { initMsg } = useTimeActions();\r\n  const advanceNotice = useRef(true);\r\n\r\n  const padNumber = useCallback((value: number) => {\r\n    return value.toString().padStart(2, '0');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(`init msg`);\r\n    initMsg(Buffer.from(location.search.substr(3), 'base64').toString('utf-8'));\r\n  }, [initMsg, location.search]);\r\n\r\n  useEffect(() => {\r\n    console.log(`sync`);\r\n    setDuration(initialDuration);\r\n    setIsTimeOver(isOver);\r\n  }, [isOver, initialDuration]);\r\n\r\n  useEffect(() => {\r\n    let countdown: ReturnType<typeof setTimeout>;\r\n\r\n    const run = () => {\r\n      if (isTimeOver) return;\r\n      const seconds = duration.asSeconds();\r\n\r\n      if (seconds <= 0) {\r\n        console.log('go home');\r\n        if (!('Notification' in window)) return;\r\n\r\n        new Notification(msg);\r\n        setIsTimeOver(true);\r\n        return;\r\n      }\r\n\r\n      // 3분전 알림\r\n      if (advanceNotice.current && seconds <= 60 * 3 && seconds >= 60 * 2) {\r\n        advanceNotice.current = false;\r\n        new Notification('퇴근 3분 전! 짐을 싸세요!');\r\n      }\r\n\r\n      countdown = setTimeout(() => {\r\n        setDuration((prev) => prev?.clone().subtract(1, 'seconds'));\r\n      }, ONE_SECOND);\r\n    };\r\n\r\n    run();\r\n\r\n    return () => {\r\n      if (countdown) clearTimeout(countdown);\r\n    };\r\n  }, [duration, isTimeOver, msg]);\r\n\r\n  const { hour, min, sec } = durationToHMS(duration);\r\n\r\n  return (\r\n    <div className=\"timer\">\r\n      <div className={`timer__content${isTimeOver ? ' over' : ''}`}>\r\n        <span className=\"timer__hour\">{padNumber(hour)}</span>\r\n        <span>:</span>\r\n        <span className=\"timer__min\">{padNumber(min)}</span>\r\n        <span>:</span>\r\n        <span className=\"timer__sec\">{padNumber(sec)}</span>\r\n      </div>\r\n      {isTimeOver ? <h2>{msg}</h2> : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nTimer.defaultProps = {\r\n  isOver: false,\r\n};\r\n\r\nexport default Timer;\r\n","import { Duration } from 'moment';\r\n\r\nexport const durationToHMS = (duration: Duration) => {\r\n  const hour = duration.get('hours');\r\n  const min = duration.get('minutes');\r\n  const sec = duration.get('seconds');\r\n\r\n  return { hour, min, sec };\r\n};\r\n","import './Header.css';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport useTime from '../hooks/useMyState';\r\n\r\nfunction Header() {\r\n  const { time, msg } = useTime();\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <Link\r\n        to={`/${time}${\r\n          msg.length > 1\r\n            ? `?m=${Buffer.from(msg, 'utf-8').toString('base64')}`\r\n            : ''\r\n        }`}\r\n      >\r\n        <h3>go home time</h3>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import './Share.css';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Power3, TimelineLite } from 'gsap';\r\nimport CSSPlugin from 'gsap/CSSPlugin';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst C = CSSPlugin;\r\n\r\nconst baseURL = 'https://chinsun9.github.io/go-home-time/';\r\n\r\nfunction Share() {\r\n  const history = useHistory();\r\n  console.log({ history });\r\n  const [shareLink, setShareLink] = useState(baseURL);\r\n  const [isEditAbleMsg, setIsEditAbleMsg] = useState(false);\r\n  const [isEditAbleTime, setIsEditAbleTime] = useState(false);\r\n  const [time, setTime] = useState('18:00');\r\n  const [msg, setMsg] = useState('');\r\n  const [isAnimate, setIsAnimate] = useState(false);\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  const onTimeCheckboxChangeHandler = () => {\r\n    setIsEditAbleTime(!isEditAbleTime);\r\n  };\r\n\r\n  const onMsgCheckboxChangeHandler = () => {\r\n    setIsEditAbleMsg(!isEditAbleMsg);\r\n  };\r\n\r\n  const onLinkClickHandler = (\r\n    e: React.MouseEvent<HTMLInputElement, MouseEvent>\r\n  ) => {\r\n    e.preventDefault();\r\n    const shareInputElement = inputRef.current;\r\n    if (!shareInputElement) return;\r\n\r\n    navigator.clipboard.writeText(shareLink);\r\n\r\n    // 모달 1초간 뛰우기\r\n    const tl = new TimelineLite();\r\n    if (isAnimate) {\r\n      return;\r\n    }\r\n    setIsAnimate(true);\r\n    tl.clear()\r\n      .fromTo(\r\n        modalRef.current,\r\n        { opacity: 0 },\r\n        { opacity: 1, duration: 0.7, ease: Power3.easeOut }\r\n      )\r\n      .to(modalRef.current, {\r\n        opacity: 0,\r\n        duration: 0.7,\r\n        ease: Power3.easeOut,\r\n        delay: 1,\r\n        onComplete: () => {\r\n          setIsAnimate(false);\r\n        },\r\n      });\r\n  };\r\n\r\n  const onTimeChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n    setTime(inputValue);\r\n  };\r\n\r\n  const onMsgChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n    setMsg(inputValue);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let shareUrl = baseURL + time.replace(':', '');\r\n    shareUrl =\r\n      isEditAbleMsg && msg.length > 1\r\n        ? `${shareUrl}?m=${Buffer.from(msg.trim(), 'utf-8').toString('base64')}`\r\n        : shareUrl;\r\n    setShareLink(shareUrl);\r\n  }, [time, msg, isEditAbleMsg]);\r\n\r\n  return (\r\n    <div className=\"share\">\r\n      <h4>링크 공유하기</h4>\r\n      <div className=\"share__text\">\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={shareLink.substr(baseURL.length)}\r\n          onClick={onLinkClickHandler}\r\n          spellCheck={false}\r\n          readOnly\r\n        />\r\n        <div className=\"share__modal\" ref={modalRef}>\r\n          <span>링크를 복사했습니다.</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"share__checkbox\">\r\n        <label htmlFor=\"ableTime\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"ableTime\"\r\n            id=\"ableTime\"\r\n            checked={isEditAbleTime}\r\n            onChange={onTimeCheckboxChangeHandler}\r\n          />\r\n          <span>퇴근시간</span>\r\n        </label>\r\n\r\n        {isEditAbleTime && (\r\n          <input type=\"time\" value={time} onChange={onTimeChangeHandler} />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"share__checkbox\">\r\n        <label htmlFor=\"ableMsg\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"ableMsg\"\r\n            id=\"ableMsg\"\r\n            checked={isEditAbleMsg}\r\n            onChange={onMsgCheckboxChangeHandler}\r\n          />\r\n          <span>메시지</span>\r\n        </label>\r\n\r\n        {isEditAbleMsg && (\r\n          <input type=\"text\" value={msg} onChange={onMsgChangeHandler} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Share;\r\n","import { combineReducers } from 'redux';\r\nimport time from './time';\r\n\r\nconst rootReducer = combineReducers({ time });\r\n\r\nexport default rootReducer;\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import moment from 'moment';\r\n\r\nexport const secondToDuration = (seconds: number) => {\r\n  return moment.duration(seconds, 'seconds');\r\n};\r\n","/* eslint-disable no-restricted-globals */\r\nimport './Home.css';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { useRouteMatch, useHistory } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport Timer from './Timer';\r\nimport useTimeActions from '../hooks/useMyActions';\r\nimport useTime from '../hooks/useMyState';\r\nimport { secondToDuration } from '../utils/secondToDuration';\r\nimport { TimerState } from '../types';\r\n\r\ntype MatchParams = {\r\n  input: string;\r\n};\r\n\r\nconst HALF_DAY = 43200;\r\nconst ONE_MIN = 60 * 1000;\r\n\r\nfunction Home() {\r\n  const match = useRouteMatch<MatchParams>();\r\n  const { input } = match?.params as MatchParams;\r\n  const { initTime } = useTimeActions();\r\n  const { flag, time } = useTime();\r\n  const [timerState, setTimerState] = useState<TimerState>();\r\n  const history = useHistory();\r\n\r\n  const getHMS = useCallback((): TimerState => {\r\n    const endTime = moment(\r\n      `${Number(time.substr(0, 2))}:${Number(time.substr(2, 2))}`,\r\n      'hh:mm'\r\n    );\r\n    const now = moment();\r\n    const diffSec = endTime.diff(now, 'seconds');\r\n\r\n    if (diffSec < 0 && diffSec + HALF_DAY > 0) {\r\n      return { duration: secondToDuration(diffSec), isOver: true };\r\n    }\r\n\r\n    if (diffSec < 0 || diffSec > HALF_DAY) {\r\n      console.info('새벽에 근무하는 사람들을 위한...');\r\n      const isOver = !(diffSec < 0);\r\n      console.log({ isOver });\r\n      return {\r\n        duration: secondToDuration(\r\n          endTime\r\n            .clone()\r\n            .add(isOver ? -1 : 1, 'd')\r\n            .diff(now, 'seconds')\r\n        ),\r\n        isOver,\r\n      };\r\n    }\r\n\r\n    return {\r\n      duration: secondToDuration(diffSec),\r\n    };\r\n  }, [time]);\r\n\r\n  // 초기화\r\n  useEffect(() => {\r\n    if (!flag) {\r\n      initTime(input || '1800');\r\n    }\r\n  }, [flag, history, initTime, input, time]);\r\n\r\n  // 최초 타이머 초기화\r\n  useEffect(() => {\r\n    if (flag) {\r\n      console.log('init');\r\n      history.replace(`/${time}${history.location.search}`);\r\n      setTimerState(getHMS());\r\n    }\r\n  }, [getHMS, flag, history, time]);\r\n\r\n  // 1분마다 시간 동기화\r\n  useEffect(() => {\r\n    const sto = setTimeout(() => {\r\n      setTimerState(getHMS());\r\n    }, ONE_MIN);\r\n\r\n    return () => {\r\n      clearTimeout(sto);\r\n    };\r\n  }, [timerState, getHMS]);\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <span>퇴근시간 {time === 'invalid' ? input : time} 까지...</span>\r\n\r\n      {time === 'invalid' && <h1 className=\"wow\">실험 정신이 대단하군요..!</h1>}\r\n      {time !== 'invalid' && timerState && (\r\n        <Timer duration={timerState.duration} isOver={timerState.isOver} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import './Footer.css';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <a\r\n        href=\"https://unsplash.com/photos/WVIkqpoKz1I\"\r\n        target=\"_blank\"\r\n        rel=\"noreferrer\"\r\n      >\r\n        Photo by @swayte on Unsplash\r\n      </a>\r\n      <Link to=\"about\">about</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import './About.css';\r\nimport React from 'react';\r\nimport Share from './Share';\r\n\r\nfunction About() {\r\n  return (\r\n    <div className=\"about\">\r\n      <p>\r\n        집이 가고 싶은 사람들을 위한 타이머\r\n        <br />\r\n        <br />이 타이머는 로컬에서 setTimeout을 통해 타이머를 표현합니다. 따라서\r\n        시간이 지남에 따라 오차가 생길 수 있습니다. 하지만 이제 1분마다\r\n        동기화합니다\r\n        <br />\r\n        <br />\r\n        source code here :{' '}\r\n        <a\r\n          href=\"https://github.com/chinsun9/go-home-time\"\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n        >\r\n          github repo\r\n        </a>\r\n      </p>\r\n\r\n      <Share />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default About;\r\n","import React from 'react';\r\nimport { useRouteMatch, Redirect } from 'react-router-dom';\r\nimport moment from 'moment';\r\n\r\ntype MatchParams = {\r\n  input: string;\r\n};\r\n\r\nfunction Start() {\r\n  const match = useRouteMatch<MatchParams>();\r\n  const { input } = match?.params as MatchParams;\r\n  const numberInput = Number(input);\r\n\r\n  if (Number.isNaN(numberInput) || numberInput < 0 || numberInput > 12)\r\n    return <Redirect to=\"/invalid\" />;\r\n\r\n  const quittingTime = moment().add(numberInput, 'hours').format('HHmm');\r\n  return <Redirect to={`/${quittingTime}`} />;\r\n}\r\n\r\nexport default Start;\r\n","import './App.css';\r\nimport React, { useEffect } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Home from './components/Home';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport About from './components/About';\r\nimport Start from './components/Start';\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    if (!('Notification' in window)) return;\r\n\r\n    if (Notification.permission === 'granted') return;\r\n\r\n    Notification.requestPermission((permission) => {\r\n      if (permission === 'denied') return;\r\n\r\n      // eslint-disable-next-line no-new\r\n      new Notification('퇴근시간이 되면 알려드립니다!', {\r\n        silent: true,\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      <div className=\"App\">\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/about\">\r\n            <About />\r\n          </Route>\r\n\r\n          <Route exact path=\"/\">\r\n            <Home />\r\n          </Route>\r\n\r\n          <Route path=\"/start/:input\">\r\n            <Start />\r\n          </Route>\r\n\r\n          <Route path=\"/:input\">\r\n            <Home />\r\n          </Route>\r\n\r\n          <Route path=\"*\">\r\n            <p>im not found</p>\r\n          </Route>\r\n        </Switch>\r\n        <Footer />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import 'core-js/stable';\r\nimport 'regenerator-runtime/runtime';\r\nimport './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport rootReducer from './modules';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport App from './App';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();\r\n","import { useSelector } from 'react-redux';\r\nimport { RootState } from '../modules';\r\n\r\nfunction useTime() {\r\n  const timeState = useSelector((state: RootState) => state.time);\r\n\r\n  return timeState;\r\n}\r\n\r\nexport default useTime;\r\n","import { createAction } from 'typesafe-actions';\r\n\r\n// 액션 type\r\nexport const SET_TIME = 'time/SET_TIME';\r\nexport const SET_MSG = 'time/SET_MSG';\r\n\r\n// 액션 생성 함수\r\nexport const setTime = createAction(SET_TIME)<string>();\r\nexport const setMsg = createAction(SET_MSG)<string>();\r\n","export { default } from './reducer';\r\nexport * from './actions';\r\nexport * from './types';\r\n"],"sourceRoot":""}