{"version":3,"sources":["hooks/useMyState.tsx","modules/time/actions.ts","modules/time/index.ts","hooks/useMyActions.tsx","modules/time/reducer.ts","components/Timer.tsx","utils/durationToHMS.tsx","components/Header.tsx","components/Share.tsx","modules/index.ts","reportWebVitals.ts","utils/secondToDuration.tsx","components/Home.tsx","components/Footer.tsx","components/About.tsx","components/Start.tsx","App.tsx","index.tsx"],"names":["useTime","useSelector","state","time","SET_TIME","SET_MSG","setTime","createAction","setMsg","useTimeActions","dispatch","useDispatch","initTime","useCallback","initMsg","msg","timeReducer","createReducer","flag","payload","numberTime","Number","isInvalidTime","isNaN","length","padStart","padEnd","Timer","initialDuration","duration","isOver","useState","abs","setDuration","isTimeOver","setIsTimeOver","location","useHistory","advanceNotice","useRef","padNumber","value","toString","useEffect","console","log","Buffer","from","search","substr","countdown","seconds","asSeconds","Notification","current","setTimeout","prev","clone","subtract","run","clearTimeout","durationToHMS","hour","min","sec","className","defaultProps","get","Header","to","baseURL","CSSPlugin","Share","history","shareLink","setShareLink","isEditAbleMsg","setIsEditAbleMsg","isEditAbleTime","setIsEditAbleTime","isAnimate","setIsAnimate","inputRef","modalRef","shareUrl","replace","trim","ref","type","onClick","e","preventDefault","navigator","clipboard","writeText","tl","TimelineLite","clear","fromTo","opacity","ease","Power3","easeOut","delay","onComplete","spellCheck","readOnly","htmlFor","name","id","checked","onChange","inputValue","target","rootReducer","combineReducers","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","secondToDuration","moment","Home","match","useRouteMatch","input","params","timerState","setTimerState","getHMS","endTime","now","diffSec","diff","info","add","sto","Footer","href","rel","About","Start","numberInput","quittingTime","format","App","permission","requestPermission","silent","basename","process","exact","path","store","createStore","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6110b6cc.chunk.js","sourcesContent":["import { useSelector } from 'react-redux';\r\nimport { RootState } from '../modules';\r\n\r\nfunction useTime() {\r\n  const timeState = useSelector((state: RootState) => state.time);\r\n\r\n  return timeState;\r\n}\r\n\r\nexport default useTime;\r\n","import { createAction } from 'typesafe-actions';\r\n\r\n// 액션 type\r\nexport const SET_TIME = 'time/SET_TIME';\r\nexport const SET_MSG = 'time/SET_MSG';\r\n\r\n// 액션 생성 함수\r\nexport const setTime = createAction(SET_TIME)<string>();\r\nexport const setMsg = createAction(SET_MSG)<string>();\r\n","export { default } from './reducer';\r\nexport * from './actions';\r\nexport * from './types';\r\n","import { useDispatch } from 'react-redux';\r\nimport { useCallback } from 'react';\r\nimport { setMsg, setTime } from '../modules/time';\r\n\r\nconst useTimeActions = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const initTime = useCallback(\r\n    (time: string) => {\r\n      dispatch(setTime(time));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  const initMsg = useCallback(\r\n    (msg: string) => {\r\n      dispatch(setMsg(msg));\r\n    },\r\n    [dispatch]\r\n  );\r\n\r\n  return { initTime, initMsg };\r\n};\r\n\r\nexport default useTimeActions;\r\n","import { createReducer } from 'typesafe-actions';\r\nimport { SET_MSG, SET_TIME } from './actions';\r\nimport { TimeAction } from './types';\r\n\r\n// 초깃값 설정\r\nconst initialState: TimeState = {\r\n  time: '1800',\r\n  flag: false,\r\n  msg: `퇴근합시다!`,\r\n};\r\n\r\nconst timeReducer = createReducer<TimeState, TimeAction>(initialState, {\r\n  [SET_TIME]: (state, { payload: time }) => {\r\n    const numberTime = Number(time);\r\n\r\n    const isInvalidTime =\r\n      Number.isNaN(numberTime) ||\r\n      time.length > 4 ||\r\n      numberTime > 2400 ||\r\n      numberTime < 0;\r\n\r\n    return {\r\n      ...state,\r\n      flag: true,\r\n      time: isInvalidTime\r\n        ? 'invalid'\r\n        : `${time.padStart(2, '0').padEnd(4, '0')}`,\r\n    };\r\n  },\r\n  [SET_MSG]: (state, { payload: msg }) => {\r\n    if (!msg) return state;\r\n\r\n    return { ...state, msg };\r\n  },\r\n});\r\n\r\nexport default timeReducer;\r\n","/* eslint-disable no-new */\r\nimport './Timer.css';\r\nimport React, { useCallback, useEffect, useState, useRef } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { Duration } from 'moment';\r\nimport useTimeActions from '../hooks/useMyActions';\r\nimport useTime from '../hooks/useMyState';\r\nimport { TimerState } from '../types';\r\nimport { durationToHMS } from '../utils/durationToHMS';\r\n\r\ntype Props = TimerState;\r\n\r\nconst ONE_SECOND = 1000;\r\n\r\n/**\r\n * 남은 시간을 넘겨주면 표시해 주는 컴포넌트\r\n */\r\nfunction Timer({ duration: initialDuration, isOver }: Props) {\r\n  const [duration, setDuration] = useState<Duration>(\r\n    isOver ? initialDuration.abs() : initialDuration\r\n  );\r\n  const [isTimeOver, setIsTimeOver] = useState(isOver);\r\n  const { location } = useHistory();\r\n  const { msg } = useTime();\r\n  const { initMsg } = useTimeActions();\r\n  const advanceNotice = useRef(true);\r\n\r\n  const padNumber = useCallback((value: number) => {\r\n    return value.toString().padStart(2, '0');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    console.log(`init msg`);\r\n    initMsg(Buffer.from(location.search.substr(3), 'base64').toString('utf-8'));\r\n  }, [initMsg, location.search]);\r\n\r\n  useEffect(() => {\r\n    console.log(`sync`);\r\n    setDuration(initialDuration);\r\n    setIsTimeOver(isOver);\r\n  }, [isOver, initialDuration]);\r\n\r\n  useEffect(() => {\r\n    let countdown: ReturnType<typeof setTimeout>;\r\n\r\n    const run = () => {\r\n      if (isTimeOver) return;\r\n      const seconds = duration.asSeconds();\r\n\r\n      if (seconds <= 0) {\r\n        console.log('go home');\r\n        new Notification(msg);\r\n        setIsTimeOver(true);\r\n        return;\r\n      }\r\n\r\n      // 3분전 알림\r\n      if (advanceNotice.current && seconds <= 60 * 3 && seconds >= 60 * 2) {\r\n        advanceNotice.current = false;\r\n        new Notification('퇴근 3분 전! 짐을 싸세요!');\r\n      }\r\n\r\n      countdown = setTimeout(() => {\r\n        setDuration((prev) => prev?.clone().subtract(1, 'seconds'));\r\n      }, ONE_SECOND);\r\n    };\r\n\r\n    run();\r\n\r\n    return () => {\r\n      if (countdown) clearTimeout(countdown);\r\n    };\r\n  }, [duration, isTimeOver, msg]);\r\n\r\n  const { hour, min, sec } = durationToHMS(duration);\r\n\r\n  return (\r\n    <div className=\"timer\">\r\n      <div className={`timer__content${isTimeOver ? ' over' : ''}`}>\r\n        <span className=\"timer__hour\">{padNumber(hour)}</span>\r\n        <span>:</span>\r\n        <span className=\"timer__min\">{padNumber(min)}</span>\r\n        <span>:</span>\r\n        <span className=\"timer__sec\">{padNumber(sec)}</span>\r\n      </div>\r\n      {isTimeOver ? <h2>{msg}</h2> : null}\r\n    </div>\r\n  );\r\n}\r\n\r\nTimer.defaultProps = {\r\n  isOver: false,\r\n};\r\n\r\nexport default Timer;\r\n","import { Duration } from 'moment';\r\n\r\nexport const durationToHMS = (duration: Duration) => {\r\n  const hour = duration.get('hours');\r\n  const min = duration.get('minutes');\r\n  const sec = duration.get('seconds');\r\n\r\n  return { hour, min, sec };\r\n};\r\n","import './Header.css';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport useTime from '../hooks/useMyState';\r\n\r\nfunction Header() {\r\n  const { time, msg } = useTime();\r\n\r\n  return (\r\n    <div className=\"header\">\r\n      <Link\r\n        to={`/${time}${\r\n          msg.length > 1\r\n            ? `?m=${Buffer.from(msg, 'utf-8').toString('base64')}`\r\n            : ''\r\n        }`}\r\n      >\r\n        <h3>go home time</h3>\r\n      </Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Header;\r\n","import './Share.css';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport { Power3, TimelineLite } from 'gsap';\r\nimport CSSPlugin from 'gsap/CSSPlugin';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-unused-vars\r\nconst C = CSSPlugin;\r\n\r\nconst baseURL = 'https://chinsun9.github.io/go-home-time/';\r\n\r\nfunction Share() {\r\n  const history = useHistory();\r\n  console.log({ history });\r\n  const [shareLink, setShareLink] = useState(baseURL);\r\n  const [isEditAbleMsg, setIsEditAbleMsg] = useState(false);\r\n  const [isEditAbleTime, setIsEditAbleTime] = useState(false);\r\n  const [time, setTime] = useState('18:00');\r\n  const [msg, setMsg] = useState('');\r\n  const [isAnimate, setIsAnimate] = useState(false);\r\n\r\n  const inputRef = useRef<HTMLInputElement>(null);\r\n  const modalRef = useRef<HTMLDivElement>(null);\r\n\r\n  const onTimeCheckboxChangeHandler = () => {\r\n    setIsEditAbleTime(!isEditAbleTime);\r\n  };\r\n\r\n  const onMsgCheckboxChangeHandler = () => {\r\n    setIsEditAbleMsg(!isEditAbleMsg);\r\n  };\r\n\r\n  const onLinkClickHandler = (\r\n    e: React.MouseEvent<HTMLInputElement, MouseEvent>\r\n  ) => {\r\n    e.preventDefault();\r\n    const shareInputElement = inputRef.current;\r\n    if (!shareInputElement) return;\r\n\r\n    navigator.clipboard.writeText(shareLink);\r\n\r\n    // 모달 1초간 뛰우기\r\n    const tl = new TimelineLite();\r\n    if (isAnimate) {\r\n      return;\r\n    }\r\n    setIsAnimate(true);\r\n    tl.clear()\r\n      .fromTo(\r\n        modalRef.current,\r\n        { opacity: 0 },\r\n        { opacity: 1, duration: 0.7, ease: Power3.easeOut }\r\n      )\r\n      .to(modalRef.current, {\r\n        opacity: 0,\r\n        duration: 0.7,\r\n        ease: Power3.easeOut,\r\n        delay: 1,\r\n        onComplete: () => {\r\n          setIsAnimate(false);\r\n        },\r\n      });\r\n  };\r\n\r\n  const onTimeChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n    setTime(inputValue);\r\n  };\r\n\r\n  const onMsgChangeHandler = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const inputValue = e.target.value;\r\n    setMsg(inputValue);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let shareUrl = baseURL + time.replace(':', '');\r\n    shareUrl =\r\n      isEditAbleMsg && msg.length > 1\r\n        ? `${shareUrl}?m=${Buffer.from(msg.trim(), 'utf-8').toString('base64')}`\r\n        : shareUrl;\r\n    setShareLink(shareUrl);\r\n  }, [time, msg, isEditAbleMsg]);\r\n\r\n  return (\r\n    <div className=\"share\">\r\n      <h4>링크 공유하기</h4>\r\n      <div className=\"share__text\">\r\n        <input\r\n          ref={inputRef}\r\n          type=\"text\"\r\n          value={shareLink.substr(baseURL.length)}\r\n          onClick={onLinkClickHandler}\r\n          spellCheck={false}\r\n          readOnly\r\n        />\r\n        <div className=\"share__modal\" ref={modalRef}>\r\n          <span>링크를 복사했습니다.</span>\r\n        </div>\r\n      </div>\r\n      <div className=\"share__checkbox\">\r\n        <label htmlFor=\"ableTime\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"ableTime\"\r\n            id=\"ableTime\"\r\n            checked={isEditAbleTime}\r\n            onChange={onTimeCheckboxChangeHandler}\r\n          />\r\n          <span>퇴근시간</span>\r\n        </label>\r\n\r\n        {isEditAbleTime && (\r\n          <input type=\"time\" value={time} onChange={onTimeChangeHandler} />\r\n        )}\r\n      </div>\r\n\r\n      <div className=\"share__checkbox\">\r\n        <label htmlFor=\"ableMsg\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"ableMsg\"\r\n            id=\"ableMsg\"\r\n            checked={isEditAbleMsg}\r\n            onChange={onMsgCheckboxChangeHandler}\r\n          />\r\n          <span>메시지</span>\r\n        </label>\r\n\r\n        {isEditAbleMsg && (\r\n          <input type=\"text\" value={msg} onChange={onMsgChangeHandler} />\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Share;\r\n","import { combineReducers } from 'redux';\r\nimport time from './time';\r\n\r\nconst rootReducer = combineReducers({ time });\r\n\r\nexport default rootReducer;\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>;\r\n","import { ReportHandler } from 'web-vitals';\r\n\r\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import moment from 'moment';\r\n\r\nexport const secondToDuration = (seconds: number) => {\r\n  return moment.duration(seconds, 'seconds');\r\n};\r\n","/* eslint-disable no-restricted-globals */\r\nimport './Home.css';\r\nimport React, { useCallback, useEffect, useState } from 'react';\r\nimport { useRouteMatch, useHistory } from 'react-router-dom';\r\nimport moment from 'moment';\r\nimport Timer from './Timer';\r\nimport useTimeActions from '../hooks/useMyActions';\r\nimport useTime from '../hooks/useMyState';\r\nimport { secondToDuration } from '../utils/secondToDuration';\r\nimport { TimerState } from '../types';\r\n\r\ntype MatchParams = {\r\n  input: string;\r\n};\r\n\r\nconst HALF_DAY = 43200;\r\nconst ONE_MIN = 60 * 1000;\r\n\r\nfunction Home() {\r\n  const match = useRouteMatch<MatchParams>();\r\n  const { input } = match?.params as MatchParams;\r\n  const { initTime } = useTimeActions();\r\n  const { flag, time } = useTime();\r\n  const [timerState, setTimerState] = useState<TimerState>();\r\n  const history = useHistory();\r\n\r\n  const getHMS = useCallback((): TimerState => {\r\n    const endTime = moment(\r\n      `${Number(time.substr(0, 2))}:${Number(time.substr(2, 2))}`,\r\n      'hh:mm'\r\n    );\r\n    const now = moment();\r\n    const diffSec = endTime.diff(now, 'seconds');\r\n\r\n    if (diffSec < 0 && diffSec + HALF_DAY > 0) {\r\n      return { duration: secondToDuration(diffSec), isOver: true };\r\n    }\r\n\r\n    if (diffSec < 0 || diffSec > HALF_DAY) {\r\n      console.info('새벽에 근무하는 사람들을 위한...');\r\n      const isOver = !(diffSec < 0);\r\n      console.log({ isOver });\r\n      return {\r\n        duration: secondToDuration(\r\n          endTime\r\n            .clone()\r\n            .add(isOver ? -1 : 1, 'd')\r\n            .diff(now, 'seconds')\r\n        ),\r\n        isOver,\r\n      };\r\n    }\r\n\r\n    return {\r\n      duration: secondToDuration(diffSec),\r\n    };\r\n  }, [time]);\r\n\r\n  // 초기화\r\n  useEffect(() => {\r\n    if (!flag) {\r\n      initTime(input || '1800');\r\n    }\r\n  }, [flag, history, initTime, input, time]);\r\n\r\n  // 최초 타이머 초기화\r\n  useEffect(() => {\r\n    if (flag) {\r\n      console.log('init');\r\n      history.replace(`/${time}${history.location.search}`);\r\n      setTimerState(getHMS());\r\n    }\r\n  }, [getHMS, flag, history, time]);\r\n\r\n  // 1분마다 시간 동기화\r\n  useEffect(() => {\r\n    const sto = setTimeout(() => {\r\n      setTimerState(getHMS());\r\n    }, ONE_MIN);\r\n\r\n    return () => {\r\n      clearTimeout(sto);\r\n    };\r\n  }, [timerState, getHMS]);\r\n\r\n  return (\r\n    <div className=\"home\">\r\n      <span>퇴근시간 {time === 'invalid' ? input : time} 까지...</span>\r\n\r\n      {time === 'invalid' && <h1 className=\"wow\">실험 정신이 대단하군요..!</h1>}\r\n      {time !== 'invalid' && timerState && (\r\n        <Timer duration={timerState.duration} isOver={timerState.isOver} />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Home;\r\n","import './Footer.css';\r\nimport React from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Footer() {\r\n  return (\r\n    <div className=\"footer\">\r\n      <a\r\n        href=\"https://unsplash.com/photos/WVIkqpoKz1I\"\r\n        target=\"_blank\"\r\n        rel=\"noreferrer\"\r\n      >\r\n        Photo by @swayte on Unsplash\r\n      </a>\r\n      <Link to=\"about\">about</Link>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Footer;\r\n","import './About.css';\r\nimport React from 'react';\r\nimport Share from './Share';\r\n\r\nfunction About() {\r\n  return (\r\n    <div className=\"about\">\r\n      <p>\r\n        집이 가고 싶은 사람들을 위한 타이머\r\n        <br />\r\n        <br />이 타이머는 로컬에서 setTimeout을 통해 타이머를 표현합니다. 따라서\r\n        시간이 지남에 따라 오차가 생길 수 있습니다. 하지만 이제 1분마다\r\n        동기화합니다\r\n        <br />\r\n        <br />\r\n        source code here :{' '}\r\n        <a\r\n          href=\"https://github.com/chinsun9/go-home-time\"\r\n          target=\"_blank\"\r\n          rel=\"noreferrer\"\r\n        >\r\n          github repo\r\n        </a>\r\n      </p>\r\n\r\n      <Share />\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default About;\r\n","import React from 'react';\r\nimport { useRouteMatch, Redirect } from 'react-router-dom';\r\nimport moment from 'moment';\r\n\r\ntype MatchParams = {\r\n  input: string;\r\n};\r\n\r\nfunction Start() {\r\n  const match = useRouteMatch<MatchParams>();\r\n  const { input } = match?.params as MatchParams;\r\n  const numberInput = Number(input);\r\n\r\n  if (Number.isNaN(numberInput) || numberInput < 0 || numberInput > 12)\r\n    return <Redirect to=\"/invalid\" />;\r\n\r\n  const quittingTime = moment().add(numberInput, 'hours').format('HHmm');\r\n  return <Redirect to={`/${quittingTime}`} />;\r\n}\r\n\r\nexport default Start;\r\n","import './App.css';\r\nimport React, { useEffect } from 'react';\r\nimport { BrowserRouter as Router, Switch, Route } from 'react-router-dom';\r\nimport Home from './components/Home';\r\nimport Header from './components/Header';\r\nimport Footer from './components/Footer';\r\nimport About from './components/About';\r\nimport Start from './components/Start';\r\n\r\nfunction App() {\r\n  useEffect(() => {\r\n    if (Notification.permission === 'granted') return;\r\n\r\n    Notification.requestPermission((permission) => {\r\n      if (permission === 'denied') return;\r\n\r\n      // eslint-disable-next-line no-new\r\n      new Notification('퇴근시간이 되면 알려드립니다!', {\r\n        silent: true,\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  return (\r\n    <Router basename={process.env.PUBLIC_URL}>\r\n      <div className=\"App\">\r\n        <Header />\r\n        <Switch>\r\n          <Route exact path=\"/about\">\r\n            <About />\r\n          </Route>\r\n\r\n          <Route exact path=\"/\">\r\n            <Home />\r\n          </Route>\r\n\r\n          <Route path=\"/start/:input\">\r\n            <Start />\r\n          </Route>\r\n\r\n          <Route path=\"/:input\">\r\n            <Home />\r\n          </Route>\r\n\r\n          <Route path=\"*\">\r\n            <p>im not found</p>\r\n          </Route>\r\n        </Switch>\r\n        <Footer />\r\n      </div>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","import './index.css';\r\nimport React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore } from 'redux';\r\nimport rootReducer from './modules';\r\nimport reportWebVitals from './reportWebVitals';\r\nimport App from './App';\r\n\r\nconst store = createStore(rootReducer);\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Provider store={store}>\r\n      <App />\r\n    </Provider>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\nreportWebVitals();\r\n"],"sourceRoot":""}